<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible"content="IE=edge"><meta name="viewport"content="width=device-width,initial-scale=1"><title>晴天</title><style>body{scroll-behavior:smooth;background-color:#cd353b}.head{display:grid;align-items:center;justify-items:center}.head h1{color:#fff;margin:30px 0}.head.video{margin:20px 0}.container{position:relative}.container.commentBox{width:300px;background-color:#ececec;border-radius:5px;margin:0 20px 20px 20px;padding:10px;float:left;border:.8px solid#000;display:grid;grid-template-areas:"profile comment comment""profile nickname nickname""profile timestamp timestamp";column-gap:10px}.container div:hover{font-weight:700;transform:scaleX(1.07)scaleY(1.07);transition:transform.5s}.container.commentBox div:nth-child(1){grid-area:profile}.container.commentBox div:nth-child(1)img{width:45px;height:45px;border-radius:50%}.container.commentBox div:nth-child(2){grid-area:comment}.container.commentBox div:nth-child(2)p{margin-top:0}.container.commentBox div:nth-child(3){grid-area:nickname;text-align:right;font-size:14px}.container.commentBox div:nth-child(4){grid-area:timestamp;text-align:right;font-size:14px}@media only screen and(min-width:100px)and(max-width:741px){.video{width:310px;height:233px}}@media only screen and(min-width:740px)and(max-width:899px){.video{width:400px;height:300px}}</style></head><body><div class="head"><h1>晴天-周杰伦</h1><iframe class="video"id="inlineFrameExample"title="Inline Frame Example"width="800px"height="500px"src="https://player.bilibili.com/player.html?aid=544148195&bvid=BV1Yv4y1Z7km&cid=296423212&page=1"></iframe></div><div id="container"class="container"><div class="commentBox"></div></div><script>var container=document.getElementById("container");var commentBox=container.getElementsByClassName("commentBox");function createElements(fatherElement,needElement){var needElement=document.createElement(needElement);fatherElement.appendChild(needElement)}function getData(){var xmlhttp;if(window.XMLHttpRequest){xmlhttp=new XMLHttpRequest()}else{xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")}xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4&&xmlhttp.status==200){var txt=xmlhttp.responseText;var dataObject=eval("("+txt+")");console.log(dataObject);function godDamnFuckingCreate(){for(let i=0;i<15;i++){createElements(container,"div");container.getElementsByTagName("div")[i].classList.add("commentBox")}for(let j=0;j<4;j++){for(let i=0;i<15;i++){createElements(commentBox[i],"div")}}for(let i=0;i<15;i++){createElements(commentBox[i].getElementsByTagName("div")[0],"img");createElements(commentBox[i].getElementsByTagName("div")[1],"p");createElements(commentBox[i].getElementsByTagName("div")[2],"span");createElements(commentBox[i].getElementsByTagName("div")[3],"span");commentBox[i].getElementsByTagName("div")[0].getElementsByTagName("img")[0].src=dataObject.hotComments[i].user.avatarUrl;commentBox[i].getElementsByTagName("div")[1].getElementsByTagName("p")[0].innerHTML=dataObject.hotComments[i].content;commentBox[i].getElementsByTagName("div")[2].getElementsByTagName("span")[0].innerHTML="-"+dataObject.hotComments[i].user.nickname;commentBox[i].getElementsByTagName("div")[3].getElementsByTagName("span")[0].innerHTML=dataObject.hotComments[i].timeStr}}godDamnFuckingCreate();waterfalls("container","commentBox")}}xmlhttp.open("GET","http://cloud-music.pl-fe.cn/comment/music?id=186016",true);xmlhttp.send()}function waterfalls(father,son){var outContainer=document.getElementById(father);var innerContainer=outContainer.getElementsByClassName(son);var boxWidth=innerContainer[0].offsetWidth+40;var screenWidth=document.body.clientWidth;var columns=parseInt(screenWidth/boxWidth);outContainer.style.width=columns*boxWidth+'px';outContainer.style.margin='0 auto';var boxHeight,boxHeightArray=[],minBoxHeight,minIndex;for(let i=0;i<commentBox.length;i++){boxHeight=innerContainer[i].offsetHeight+10;if(i<columns){boxHeightArray.push(boxHeight)}else{minBoxHeight=boxHeightArray[findIndex(boxHeightArray)];minIndex=findIndex(boxHeightArray);innerContainer[i].style.position="absolute";innerContainer[i].style.left=minIndex*boxWidth+'px';innerContainer[i].style.top=minBoxHeight+'px';boxHeightArray[minIndex]+=boxHeight}}function findIndex(arr){var j=0;for(i in arr){if(arr[j]>arr[i])j=i}return j}}window.onload=function(){getData()}window.onresize=function(){waterfalls("container","commentBox")}</script></body></html>
